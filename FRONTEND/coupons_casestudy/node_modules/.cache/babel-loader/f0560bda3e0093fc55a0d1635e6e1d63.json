{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Subarna\\\\Desktop\\\\coupons_casestudy\\\\src\\\\common\\\\auth-verify.js\";\nimport React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst parseJwt = token => {\n  try {\n    return JSON.parse(atob(token.split('.')[1]));\n  } catch (e) {\n    return null;\n  }\n};\n\nclass AuthVerify extends Component {\n  constructor(props) {\n    super(props);\n    props.history.listen(() => {\n      const user = JSON.parse(localStorage.getItem(\"user\"));\n\n      if (user) {\n        const decodedJwt = parseJwt(user.accessToken);\n\n        if (decodedJwt.exp * 1000 < Date.now()) {\n          props.logOut();\n        }\n      }\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 12\n    }, this);\n  }\n\n}\n\nexport default _c = withRouter(AuthVerify);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"names":["React","Component","withRouter","parseJwt","token","JSON","parse","atob","split","e","AuthVerify","constructor","props","history","listen","user","localStorage","getItem","decodedJwt","accessToken","exp","Date","now","logOut","render"],"sources":["C:/Users/Subarna/Desktop/coupons_casestudy/src/common/auth-verify.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nconst parseJwt = (token) => {\r\n  try {\r\n    return JSON.parse(atob(token.split('.')[1]));\r\n  } catch (e) {\r\n    return null;\r\n  }\r\n};\r\n\r\nclass AuthVerify extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    props.history.listen(() => {\r\n      const user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n      if (user) {\r\n        const decodedJwt = parseJwt(user.accessToken);\r\n\r\n        if (decodedJwt.exp * 1000 < Date.now()) {\r\n          props.logOut();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return <div></div>;\r\n  }\r\n}\r\n\r\nexport default withRouter(AuthVerify);\r\n"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,UAAT,QAA2B,kBAA3B;;;AAEA,MAAMC,QAAQ,GAAIC,KAAD,IAAW;EAC1B,IAAI;IACF,OAAOC,IAAI,CAACC,KAAL,CAAWC,IAAI,CAACH,KAAK,CAACI,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAD,CAAf,CAAP;EACD,CAFD,CAEE,OAAOC,CAAP,EAAU;IACV,OAAO,IAAP;EACD;AACF,CAND;;AAQA,MAAMC,UAAN,SAAyBT,SAAzB,CAAmC;EACjCU,WAAW,CAACC,KAAD,EAAQ;IACjB,MAAMA,KAAN;IAEAA,KAAK,CAACC,OAAN,CAAcC,MAAd,CAAqB,MAAM;MACzB,MAAMC,IAAI,GAAGV,IAAI,CAACC,KAAL,CAAWU,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAb;;MAEA,IAAIF,IAAJ,EAAU;QACR,MAAMG,UAAU,GAAGf,QAAQ,CAACY,IAAI,CAACI,WAAN,CAA3B;;QAEA,IAAID,UAAU,CAACE,GAAX,GAAiB,IAAjB,GAAwBC,IAAI,CAACC,GAAL,EAA5B,EAAwC;UACtCV,KAAK,CAACW,MAAN;QACD;MACF;IACF,CAVD;EAWD;;EAEDC,MAAM,GAAG;IACP,oBAAO;MAAA;MAAA;MAAA;IAAA,QAAP;EACD;;AAnBgC;;AAsBnC,oBAAetB,UAAU,CAACQ,UAAD,CAAzB"},"metadata":{},"sourceType":"module"}